# 应用工程结构及说明
如你所见，`agentUniverse`在设计时具备轻量与融合能力，您可以通过引入`agentUniverse`至您的任何工程中进行工作。

## 推荐工程目录结构及说明
下列目录结构为agentUniverse官方推荐结构：

```
/
├── boostrap/
│   ├── intelligence/
│   │   └── server_application.py
│   ├── platform/
│   │   └── product_application.py
├── intelligence/
│   ├── agentic/
│   │   ├── agent
│   │   │   └── agent_instance
│   │   │   └── agent_template
│   │   ├── knowledge
│   │   │   └── store/
│   │   │   └── rag_router/
│   │   │   └── doc_processor/
│   │   ├── llm
│   │   ├── prompt
│   │   ├── memory
│   │   ├── tool
│   │   └── work_pattern
│   ├── service/
│   │   └── agent_service
│   │   └── classic_service
│   ├── dal/
│   ├── integration/
│   ├── utils/
│   └── test/
├── platform/
├── config
├── pyproject.toml
└── other project files...
```

每个层级包目录具体含义如下：
* boostrap - web server启动入口层
  * intelligence - 智能应用web server启动入口层
  * platform - 产品化服务web server启动入口层
* intelligence - 智能工程层：用于智能体构建，组件拓展定制以及服务化实现
  * agentic - 智能领域层，放置智能体相关的agentUniverse领域组件
    * agent - 智能体层，对应agentUniverse的agent领域组件，可构建智能体模版、智能体实例等
      * agent_template - 智能体模版层，基于业务理解抽象出的智能体模版，用于帮助用户快速构建智能体。完成模版构建后，使用者只需基于模版配置特定属性，即可执行对应的编排逻辑
      * agent_instance - 智能体实例层
    * knowledge - 知识层，对应agentUniverse的knowledge领域组件，包含知识注入，查询能力。
      * store - 知识库存储，对应agentUniverse的store领域组件
      * rag_router - 知识库rag路由，对应agentUniverse的rag_router领域组件
      * doc_processor - 知识库文档处理器，对应agentUniverse的doc_processor领域组件
    * llm - llm层，对应agentUniverse的llm领域组件，提供大模型服务，如chatgpt/qwen等
    * prompt - prompt层，对应agentUniverse的prompt领域组件，提供提示词模板、提示词生成等能力
    * memory - 记忆层，对应agentUniverse的memory领域组件，提供agent的记忆能力，包含记忆压缩和记忆存储
    * tool - 工具层，对应agentUniverse的tool领域组件，提供辅助工具，如api服务
    * work_pattern - 工作模式层，提供典型的单智能体和多智能体间的工作协同范式，包括PEER/DOE/MAP等。
  * service - 智能工程服务层
    * agent_service - 智能服务层，对应agentUniverse的service领域组件，关联智能体实例，对外提供服务
    * classic_service - 传统服务层，承接非智能体服务，如文件服务、会话服务等
  * dal - 数据访问层，提供数据源访问机制，抽象数据访问接口
  * integration - 集成层，用于连接和协调不同系统、服务及组件
  * utils - 基础工具层，提供小型，通用的辅助函数
  * test - 单元测试
* platform - 平台工程，承接智能工程以外的平台能力
* config - 系统级配置目录


## 使用任意工程目录结构
以上为agentUniverse官方推荐的工程目录结构，若您想按照个人喜好与实际情况进行自定义调整，但请务必遵循以下的规则。

### 启动目录boostrap
无论您的项目启动脚本在何位置，除测试外请保证应用服务使用如下语句进行服务启动：

```python
from agentuniverse.agent_serve.web.web_booster import start_web_server
from agentuniverse.base.agentuniverse import AgentUniverse


class ServerApplication:
    """
    Server application.
    """

    @classmethod
    def start(cls):
        AgentUniverse().start()
        start_web_server()

ServerApplication.start()

```
`ServerApplication.start()`为本框架的serve启动方法，其会接收项目配置路径`config_path`作为入参，`config_path`默认路径为项目根路径下的config目录中的文件 `project_root_dir/config/config.toml`，请确保config文件路径正确，如果您进一步变更了config文件的目录，请将`config_path`作为调整；

### config目录
如 [启动目录boostrap](#启动目录boostrap)部分所述，项目的默认config路径为`project_root_dir/config/config.toml`，若您对其进行了调整，请确保在应用server启动时将正确的config文件路径传入启动方法。

### core目录
如推荐目录结构工程所示，intelligence中的agentic工程目录主要用于放置agent、knowledge、LLM等智能化相关的领域组件，若您想自定义核心组件位置，只需在项目工程的主配置文件`config/config.toml`中的`[CORE_PACKAGE]`对领域组件进行路径指定即可，如下：
```toml
[CORE_PACKAGE]
# Perform a full component scan and registration for all the paths under this list.
default = ['sample_standard_app.intelligence.agentic']
# Scan and register agent components for all paths under this list, with priority over the default.
agent = ['sample_standard_app.intelligence.agentic.agent']
# Scan and register knowledge components for all paths under this list, with priority over the default.
knowledge = ['sample_standard_app.intelligence.agentic.knowledge']
# Scan and register llm components for all paths under this list, with priority over the default.
llm = ['sample_standard_app.intelligence.agentic.llm']
# Scan and register tool components for all paths under this list, with priority over the default.
tool = ['sample_standard_app.intelligence.agentic.tool']
# Scan and register memory components for all paths under this list, with priority over the default.
memory = ['sample_standard_app.intelligence.agentic.memory']
# Scan and register service components for all paths under this list, with priority over the default.
service = ['sample_standard_app.intelligence.service.agent_service']
# Scan and register prompt components for all paths under this list, with priority over the default.
prompt = ['sample_standard_app.intelligence.agentic.prompt']
# Scan and register store components for all paths under this list, with priority over the default.
store = ['sample_standard_app.intelligence.agentic.knowledge.store']
# Scan and register rag_router components for all paths under this list, with priority over the default.
rag_router = ['sample_standard_app.intelligence.agentic.knowledge.rag_router']
# Scan and register doc_processor components for all paths under this list, with priority over the default.
doc_processor = ['sample_standard_app.intelligence.agentic.knowledge.doc_processor']
# Scan and register query_paraphraser components for all paths under this list, with priority over the default.
query_paraphraser = ['sample_standard_app.intelligence.agentic.knowledge.query_paraphraser']
# Scan and register memory_compressor components for all paths under this list, with priority over the default.
memory_compressor = ['sample_standard_app.intelligence.agentic.memory.memory_compressor']
# Scan and register memory_storage components for all paths under this list, with priority over the default.
memory_storage = ['sample_standard_app.intelligence.agentic.memory.memory_storage']
# Scan and register product components for all paths under this list, with priority over the default.
product = ['sample_standard_app.platform.difizen.product']
# Scan and register workflow components for all paths under this list, with priority over the default.
workflow = ['sample_standard_app.platform.difizen.workflow']
```
包定义的格式遵从标准的python包路径格式，框架在启动时会根据定义的各类组件package路径进行注册扫描与统一管理。

**Tips**: package路径以您的项目根目录下一级开始，如sample_standard_app示例中的package路径由于在agentUniverse层级下，所以由sample_standard_app开始, 若您以sample_standard_app为项目模版则路径应以intelligence.xxx 开头。
